<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Casa de Playa</title>
    <link rel="icon" href="/Resource/Logo/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/idiomas.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/assistant.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <script type="module" src="/js/firebase-config.js"></script>
    <script type="module" src="/js/property-sync.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <header>
        <!-- Botón de menú móvil -->
        <button class="mobile-menu-button" aria-label="Menú">
            <div class="hamburger"></div>
        </button>
        <div class="logo-container">
            <img src="/Resource/Logo/logo.png" alt="Logo de POLYLINE" class="logo">
            <h1 class="company-name">POLYLINE</h1>
            <p class="slogan">CONSTRUCTORA</p>
        </div>
        <nav>
            <ul class="nav-menu">
                <li class="language-selector">
                    <button class="language-btn" onclick="toggleLanguageOptions()">
                        <img src="/Resource/flags/es.png" alt="Español" id="currentFlag">
                        <span id="currentLanguage">Español</span>
                    </button>
                    <div class="language-options" id="languageOptions">
                        <div class="language-option" onclick="changeLanguage('es')">
                            <img src="/Resource/flags/es.png" alt="Español">
                            <span>Español</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('en')">
                            <img src="/Resource/flags/en.png" alt="English">
                            <span>English</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('pt')">
                            <img src="/Resource/flags/pt.png" alt="Português">
                            <span>Português</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('zh')">
                            <img src="/Resource/flags/zh.png" alt="中文">
                            <span>中文</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('ja')">
                            <img src="/Resource/flags/ja.png" alt="日本語">
                            <span>日本語</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('it')">
                            <img src="/Resource/flags/it.png" alt="Italiano">
                            <span>Italiano</span>
                        </div>
                    </div>
                </li>
                <li><a href="/index.html" class="active" data-translate="Inicio">Inicio</a></li>
                <li><a href="/#para-ti" data-translate="Para Tí">Para Tí</a></li>
                <li class="dropdown">
                    <a href="/PROYECTOS/proyectos.html" id="proyectos-link" data-translate="Proyectos">Proyectos</a>
                    <ul class="dropdown-menu">
                        <li><a href="/PROYECTOS/proyectos.html" data-translate="Casas de Playa en Venta / Alquiler">Casas de Playa en Venta / Alquiler</a></li>
                        <li><a href="/PROYECTOS/PBEN1.html" data-translate="Proyecto Benavides 1">Proyecto Benavides 1</a></li>
                        <li><a href="/PROYECTOS/PBEN2.html" data-translate="Proyecto Benavides 2">Proyecto Benavides 2</a></li>
                        <li><a href="/PROYECTOS/PPL1.html" data-translate="Proyecto Sienna">Proyecto Sienna</a></li>
                        <li><a href="/PROYECTOS/PLIN.html" data-translate="Proyecto Varsovia">Proyecto Varsovia</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="/Contact/Información.html" id="proyectos-link" data-translate="Contacto">Contacto</a>
                    <ul class="dropdown-menu">
                        <li><a href="/Contact/Información.html" data-translate="Información">Información</a></li>
                        <li><a href="/Contact/Agenda Una Reunión.html" data-translate="Agenda Una Reunión">Agenda una Reunión con Nosotros</a></li>
                    </ul>
                </li>
                <li><a href="/PROYECTOS/cotizar.html" data-translate="Cotizar Proyecto">Cotizar Proyecto</a></li>
                <li id="translateContainer" class="translate-container">
                    <div id="google_translate_element" title="Seleccionar idioma"></div>
                </li>
                <li id="loginContainer" class="mobile-login">
                    <a href="/pages/login.html" class="login-link" id="loginLink">
                        <i class="fas fa-sign-in-alt"></i> 
                        <span data-translate="Login">Login</span>
                    </a>
                    <div id="userProfile" style="display: none;">
                        <div class="profile-header">
                            <a href="/pages/perfil.html" style="text-decoration: none; color: inherit; ">
                                <span data-translate="Perfil">Perfil</span>
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
    </header>
    <div class="menu-overlay"></div>

    <section id="inicio" class="property-showcase">
        <!-- Contenedor de las imágenes (a la izquierda) -->
        <div class="image-gallery">
            <div class="image-slider">
                <img src="/Resource/CPLAY/proyectoPLAY.png" alt="Vista principal" class="slider-image active">
                <img src="/Resource/CPLAY/1.jpeg" alt="Interior 1" class="slider-image">
                <img src="/Resource/CPLAY/2.jpeg" alt="Interior 2" class="slider-image">
                <img src="/Resource/CPLAY/3.jpeg" alt="Interior 3" class="slider-image">
            </div>
            <div class="image-controls">
                <button class="nav-btn prev-btn" onclick="changeImage('prev')">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="image-dots">
                    <span class="dot active" onclick="goToImage(0)"></span>
                    <span class="dot" onclick="goToImage(1)"></span>
                    <span class="dot" onclick="goToImage(2)"></span>
                    <span class="dot" onclick="goToImage(3)"></span>
                </div>
                <button class="nav-btn next-btn" onclick="changeImage('next')">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
            </div>
        </div>
       

        <!-- Contenido de la descripción (a la derecha) -->
        <div class="property-details">
            <h2 class="property-title" data-translate="Casa de Playa">Casa de Playa</h2>
            <div class="property-features">
            <div class="feature-item">
                <i class="fa fa-bed"></i>
                <div class="feature-text">
                <h4 data-translate="Dormitorios">Dormitorios</h4>
                <p data-translate="5 dormitorios amplios">5 dormitorios amplios</p>
                </div>
            </div>
            <div class="feature-item">
                <i class="fa fa-umbrella-beach"></i>
                <div class="feature-text">
                <h4 data-translate="Terrazas">Terrazas</h4>
                <p data-translate="Amplias terrazas">Amplias terrazas</p>
                </div>
            </div>
            <div class="feature-item">
                <i class="fa fa-swimming-pool"></i>
                <div class="feature-text">
                <h4 data-translate="Piscina">Piscina</h4>
                <p data-translate="Piscina privada">Piscina privada</p>
                </div>
            </div>
            <div class="feature-item">
                <i class="fa fa-tools"></i>
                <div class="feature-text">
                <h4 data-translate="Servicios">Servicios</h4>
                <p data-translate="Área de servicio completa">Área de servicio completa</p>
                </div>
            </div>
            </div>
            <div class="property-description">
            <p data-translate="Descripción casa playa">Exclusiva casa de playa con 5 dormitorios, amplias terrazas para disfrutar del aire libre, piscina privada y área de servicio completa. Un espacio perfecto para disfrutar de la vida costera con todas las comodidades.</p>
            </div>
            <button class="contact-now-btn" onclick="openContactModal()">
            <span data-translate="Contactar ahora">Contactar ahora</span>
            </button>
        </div>
        
    </section>

    <script type="module">
        import { initPropertySync } from '/js/property-sync.js';
        
        document.addEventListener('DOMContentLoaded', () => {
            initPropertySync('1nTmvbpfhFt76rl90XHd'); // ID de Firebase para CPG2
        });
    </script>
    
    <button id="dark-mode-toggle" class="dark-mode-button" style="position: fixed; bottom: 20px; right: 30px;"></button>
    
    <footer class="seccion-footer">
        <div class="contenedor-footer">
            <div class="bloque-logo">
                <img src="/Resource/Logo/logo.png" alt="Polyline">
                <div class="texto-copyright" style="color: black;">
                    <p>&copy; 2025 POLYLINE. Todos los derechos reservados.</p>
                </div>
            </div>
            <div class="bloque-contacto" style="color: black;">
                <h3>CONTACTOS:</h3>
                <p>WhatsApp: <a href="https://wa.link/lkvfnb">+51 943 812 536</a></p>
                <p>Email: <a href="mailto:polylinesac@yahoo.com">polylinesac@yahoo.com</a></p>
                <p>Dirección: Av. Óscar R. Benavides</p>
            </div>
        </div>
    </footer>

    <script src="/js/assistant.js"></script>

    <div class="social-buttons" style="position: fixed; bottom: 20px; right: 142px;">
        <button class="social-btn facebook" onclick="window.open('https://www.facebook.com/PolylineSalas')">
            <i class="fab fa-facebook-f"></i>
        </button>
        <button class="social-btn whatsapp" onclick="window.open('https://wa.link/lkvfnb')">
            <i class="fab fa-whatsapp"></i>
        </button>
        <button class="social-btn instagram" onclick="window.open('https://www.instagram.com/arquitectosalasperu/')">
            <i class="fab fa-instagram"></i>
        </button>
        <button class="social-btn linkedin" onclick="window.open('https://www.linkedin.com/in/arquitectosalas')">
            <i class="fab fa-linkedin-in"></i>
        </button>
        <button class="social-btn youtube" onclick="window.open('https://www.youtube.com/channel/UC9wMT7_zsq7yE0MMCSxiVMw')">
            <i class="fab fa-youtube"></i>
        </button>
    </div>
    
    <div id="contactModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-grid">
                <!-- Preview Section -->
                <div class="property-preview">
                    <img src="/Resource/CPLAY/proyectoPLAY.png" alt="Casa de Playa">
                    <div class="preview-details">
                        <h3 data-translate="Casa de Playa">Casa de Playa</h3>
                        <p data-translate="Descripción casa playa modal">Exclusiva casa de playa con 5 dormitorios, amplias terrazas para disfrutar del aire libre, piscina privada y área de servicio completa. Un espacio perfecto para disfrutar de la vida costera con todas las comodidades.</p>
                        <div class="preview-features">
                            <span><i class="fa fa-bed"></i> <span data-translate="5 dormitorios amplios">5 dormitorios amplios</span></span>
                            <span><i class="fa fa-umbrella-beach"></i> <span data-translate="Amplias terrazas">Amplias terrazas</span></span>
                            <span><i class="fa fa-swimming-pool"></i> <span data-translate="Piscina privada">Piscina privada</span></span>
                            <span><i class="fa fa-tools"></i> <span data-translate="Área de servicio completa">Área de servicio completa</span></span>
                        </div>
                    </div>
                </div>
                <!-- Contact Form -->
                <form id="contactForm" class="contact-form" onsubmit="sendEmail(event)">
                    <h2 data-translate="Solicitar información">Solicitar información</h2>
                    <input type="hidden" name="to_name" value="Polyline">
                    <input type="hidden" name="property_title" value="Casa de Playa">
                    <div class="form-group">
                        <input type="text" id="name" name="from_name" required>
                        <label for="name" data-translate="Nombre completo">Nombre completo</label>
                    </div>
                    <div class="form-group">
                        <input type="email" id="email" name="from_email" required>
                        <label for="email" data-translate="Correo electrónico">Correo electrónico</label>
                    </div>
                    <div class="form-group">
                        <input type="tel" id="phone" name="from_phone" required>
                        <label for="phone" data-translate="Teléfono">Teléfono</label>
                    </div>
                    <button type="submit" class="submit-btn">
                        <span data-translate="Enviar solicitud">Enviar solicitud</span>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>
   
    <link rel="stylesheet" href="/css/contact-form.css">
    <script src="/js/contact-form.js"></script>
   
    <script src="/scripts.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuButton = document.querySelector('.mobile-menu-button');
        const navMenu = document.querySelector('.nav-menu');
        const menuOverlay = document.querySelector('.menu-overlay');
        const dropdowns = document.querySelectorAll('.dropdown');
    
        // Toggle menú móvil
        mobileMenuButton.addEventListener('click', function() {
            this.classList.toggle('active');
            navMenu.classList.toggle('active');
            menuOverlay.classList.toggle('active');
            document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
        });
    
        // Cerrar menú al hacer click en el overlay
        menuOverlay.addEventListener('click', function() {
            mobileMenuButton.classList.remove('active');
            navMenu.classList.remove('active');
            menuOverlay.classList.remove('active');
            document.body.style.overflow = '';
        });
    
        // Manejar dropdowns en móvil
        dropdowns.forEach(dropdown => {
            const link = dropdown.querySelector('a');
            link.addEventListener('click', function(e) {
                if (window.innerWidth <= 768) {
                    e.preventDefault();
                    dropdown.classList.toggle('active');
                }
            });
        });
    
        // Cerrar menú al cambiar el tamaño de la ventana
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                mobileMenuButton.classList.remove('active');
                navMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
    
        // Agregar después de la inicialización de Firebase
        document.getElementById('logoutButton').addEventListener('click', async (e) => {
            e.preventDefault();
            try {
                await signOut(auth);
                console.log('Usuario cerró sesión');
                window.location.href = '/index.html';
            } catch (error) {
                console.error('Error al cerrar sesión:', error);
            }
        });
    
        // Toggle del menú desplegable
        document.getElementById('userProfile').addEventListener('click', function(e) {
            const dropdown = this.querySelector('.user-dropdown');
            dropdown.classList.toggle('show');
            e.stopPropagation();
        });
    
        // Cerrar el menú al hacer clic fuera
        document.addEventListener('click', function() {
            const dropdowns = document.getElementsByClassName('user-dropdown');
            for (const dropdown of dropdowns) {
                if (dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                }
            }
        });
    });
    </script>

    <script type="module">
        import { openContactModal } from '/js/contact-form.js';
        
        // Hacer la función disponible globalmente
        window.openContactModal = openContactModal;
        
        // Agregar el evento al botón
        document.getElementById('contactBtn').addEventListener('click', openContactModal);
    </script>
    
    <script>
        // Inicializar EmailJS
        (function() {
            emailjs.init("At9dqPbCCCXcMSTls");
        })();

        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('contactModal');
            const closeBtn = document.querySelector('.close-modal');
            const contactForm = document.getElementById('contactForm');

            window.openContactModal = function() {
                modal.style.display = 'block';
            };

            closeBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });

            window.addEventListener('click', function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            });
        });

        function sendEmail(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const propertyTitle = "Casa de Playa";
            
            const templateParams = {
                to_name: 'Polyline',
                property_title: propertyTitle,
                from_name: name,
                from_email: email,
                from_phone: phone,
                message: `Nueva consulta sobre ${propertyTitle}`
            };

            const btn = document.querySelector('.submit-btn');
            btn.disabled = true;
            
            emailjs.send('service_nmqdl9u', 'template_xzgzp8p', templateParams)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    alert('¡Mensaje enviado con éxito!');
                    document.getElementById('contactForm').reset();
                    document.getElementById('contactModal').style.display = 'none';
                })
                .catch(function(error) {
                    console.error('FAILED...', error);
                    alert('Error al enviar el mensaje. Por favor, intente nuevamente.');
                })
                .finally(() => {
                    btn.disabled = false;
                });

            return false;
        }
    </script>
    
<script>
    // Variables para el control del slider
    let currentImage = 0;
    const images = document.querySelectorAll('.slider-image');
    const dots = document.querySelectorAll('.dot');

    // Función para cambiar la imagen con animación
    function changeImage(direction) {
        const nextImage = direction === 'next' 
            ? (currentImage + 1) % images.length 
            : (currentImage - 1 + images.length) % images.length;
        
        // Animación de salida
        anime({
            targets: images[currentImage],
            opacity: [1, 0],
            translateX: direction === 'next' ? [-0, -100] : [0, 100],
            easing: 'easeInOutQuad',
            duration: 600
        });

        // Animación de entrada
        anime({
            targets: images[nextImage],
            opacity: [0, 1],
            translateX: direction === 'next' ? [100, 0] : [-100, 0],
            easing: 'easeInOutQuad',
            duration: 600
        });

        // Actualizar clases activas
        images[currentImage].classList.remove('active');
        images[nextImage].classList.add('active');
        dots[currentImage].classList.remove('active');
        dots[nextImage].classList.add('active');
        
        currentImage = nextImage;
    }

    // Función para ir a una imagen específica
    function goToImage(index) {
        if (index === currentImage) return;
        changeImage(index > currentImage ? 'next' : 'prev');
    }

    // Animación inicial de los elementos
    window.addEventListener('load', () => {
        // Animar título
        anime({
            targets: '.property-title',
            opacity: [0, 1],
            translateY: [20, 0],
            duration: 1000,
            easing: 'easeOutExpo'
        });

        // Animar características
        anime({
            targets: '.feature-item',
            opacity: [0, 1],
            translateX: [20, 0],
            delay: anime.stagger(100),
            duration: 800,
            easing: 'easeOutQuad'
        });

        // Animar descripción
        anime({
            targets: '.property-description',
            opacity: [0, 1],
            translateY: [20, 0],
            duration: 1000,
            delay: 500,
            easing: 'easeOutExpo'
        });
    });
</script>
</body>
</html>
    <script>
        // Funciones para el selector de idiomas
        function toggleLanguageOptions() {
            const selector = document.querySelector('.language-selector');
            const options = document.getElementById('languageOptions');
            selector.classList.toggle('active');
            options.classList.toggle('show');
        }

        function changeLanguage(lang) {
            const currentFlag = document.getElementById('currentFlag');
            const currentLanguage = document.getElementById('currentLanguage');
            const options = document.getElementById('languageOptions');
            
            // Actualizar el botón con el idioma seleccionado
            currentFlag.src = `/Resource/flags/${lang}.png`;
            currentLanguage.textContent = {
                'es': 'Español',
                'en': 'English',
                'pt': 'Português',
                'zh': '中文',
                'ja': '日本語',
                'it': 'Italiano'
            }[lang];
            
            // Ocultar las opciones
            options.classList.remove('show');
            
            // Traducir el contenido
            translatePage(lang);
        }

        // Objeto con las traducciones
        const translations = {
            'en': {
                'Inicio': 'Home',
                'Para Tí': 'For You',
                'Proyectos': 'Projects',
                'Casas de Playa en Venta / Alquiler': 'Beach Houses for Sale / Rent',
                'Proyecto Benavides 1': 'Benavides Project 1',
                'Proyecto Benavides 2': 'Benavides Project 2',
                'Proyecto Sienna': 'Sienna Project',
                'Proyecto Varsovia': 'Varsovia Project',
                'Contacto': 'Contact',
                'Información': 'Information',
                'Agenda Una Reunión': 'Schedule a Meeting', 
                'Cotizar Proyecto': 'Quote Project',
                'Login': 'Login',
                'Perfil': 'Profile',
                'Casa de Playa': 'Beach House',
                'Dormitorios': 'Bedrooms',
                '5 dormitorios amplios': '5 spacious bedrooms',
                'Terrazas': 'Terraces',
                'Amplias terrazas': 'Spacious terraces',
                'Piscina': 'Pool',
                'Piscina privada': 'Private pool',
                'Servicios': 'Services',
                'Área de servicio completa': 'Full service area',
                'Descripción casa playa': 'Exclusive beach house with 5 bedrooms, spacious terraces to enjoy outdoors, private pool and complete service area. A perfect space to enjoy coastal life with all amenities.',
                'Descripción casa playa modal': 'Modern beach house distributed over four levels, perfect for families who value privacy and comfort. Designed with an intelligent layout that separates social areas from private ones, offering privileged views of the Golf from its terraces.',
                'Contactar ahora': 'Contact Now',
                'Solicitar información': 'Request Information', 
                'Nombre completo': 'Full Name',
                'Correo electrónico': 'Email',
                'Teléfono': 'Phone',
                'Enviar solicitud': 'Send Request'
            },
            'pt': {
                'Inicio': 'Início',
                'Para Tí': 'Para Você', 
                'Proyectos': 'Projetos',
                'Casas de Playa en Venta / Alquiler': 'Casas de Praia à Venda / Aluguel',
                'Proyecto Benavides 1': 'Benavides Projeto 1',
                'Proyecto Benavides 2': 'Benavides Projeto 2',
                'Proyecto Sienna': 'Sienna Projeto',
                'Proyecto Varsovia': 'Varsovia Projeto',
                'Contacto': 'Contato',
                'Información': 'Informações',
                'Agenda Una Reunión': 'Agendar uma Reunião',
                'Cotizar Proyecto': 'Orçar Projeto',
                'Login': 'Entrar',
                'Perfil': 'Perfil',
                'Casa de Playa': 'Casa de Praia',
                'Dormitorios': 'Quartos',
                '5 dormitorios amplios': '5 quartos amplos',
                'Terrazas': 'Terraços',
                'Amplias terrazas': 'Amplos terraços',
                'Piscina': 'Piscina',
                'Piscina privada': 'Piscina privativa',
                'Servicios': 'Serviços',
                'Área de servicio completa': 'Área de serviço completa',
                'Descripción casa playa': 'Casa de praia exclusiva com 5 quartos, amplos terraços para desfrutar do ar livre, piscina privativa e área de serviço completa. Um espaço perfeito para desfrutar da vida à beira-mar com todo o conforto.',
                'Descripción casa playa modal': 'Moderna casa de praia distribuída em quatro níveis, perfeita para famílias que valorizam privacidade e conforto. Projetada com um layout inteligente que separa áreas sociais das privadas, oferecendo vistas privilegiadas do Golf desde seus terraços.',
                'Contactar ahora': 'Contatar agora',
                'Solicitar información': 'Solicitar informação',
                'Nombre completo': 'Nome completo',
                'Correo electrónico': 'Email',
                'Teléfono': 'Telefone',
                'Enviar solicitud': 'Enviar solicitação'
            },
            'zh': {
                'Inicio': '首页',
                'Para Tí': '为您',
                'Proyectos': '项目',
                'Casas de Playa en Venta / Alquiler': '出售/出租房屋',
                'Proyecto Benavides 1': '贝纳维德斯项目 1',
                'Proyecto Benavides 2': '贝纳维德斯项目 2',
                'Proyecto Sienna': '锡耶纳项目',
                'Proyecto Varsovia': '华沙项目',
                'Contacto': '联系',
                'Información': '信息', 
                'Agenda Una Reunión': '预约会议',
                'Cotizar Proyecto': '项目报价',
                'Login': '登录',
                'Perfil': '个人资料',
                'Casa de Playa': '海滨别墅',
                'Dormitorios': '卧室',
                '5 dormitorios amplios': '5间宽敞卧室',
                'Terrazas': '露台',
                'Amplias terrazas': '宽敞露台',
                'Piscina': '游泳池',
                'Piscina privada': '私人泳池',
                'Servicios': '服务',
                'Área de servicio completa': '完整服务区域',
                'Descripción casa playa': '独特海滨别墅, 5间卧室, 宽敞露台享受户外生活，私人泳池和完整服务区域。完美享受海岸生活的理想空间。',
                'Descripción casa playa modal': '现代海滨别墅分四层，适合重视隐私和舒适的家庭。智能布局将社交区域与私人区域分开，露台可欣赏高尔夫球场的优美景观。',
                'Contactar ahora': '立即联系',
                'Solicitar información': '请求信息',
                'Nombre completo': '全名',
                'Correo electrónico': '电子邮件',
                'Teléfono': '电话',
                'Enviar solicitud': '提交请求'
            },
            'ja': {
                'Inicio': 'ホーム',
                'Para Tí': 'お客様向け',
                'Proyectos': 'プロジェクト', 
                'Casas de Playa en Venta / Alquiler': ' 販売/賃貸ビーチハウス',
                'Proyecto Benavides 1': 'ベナビデス・プロジェクト1',
                'Proyecto Benavides 2': 'ベナビデス・プロジェクト2',
                'Proyecto Sienna': 'シエナ・プロジェクト',
                'Proyecto Varsovia': 'ワルシャワ・プロジェクト',
                'Contacto': 'お問い合わせ',
                'Información': '情報',
                'Agenda Una Reunión': '見学予約',
                'Cotizar Proyecto': '価格見積もり',
                'Login': 'ログイン',
                'Perfil': 'プロフィール',
                'Casa de Playa': 'ビーチハウス',
                'Dormitorios': '寝室',
                '5 dormitorios amplios': '広々とした5寝室',
                'Terrazas': 'テラス',
                'Amplias terrazas': '広々としたテラス',
                'Piscina': 'プール',
                'Piscina privada': 'プライベートプール', 
                'Servicios': '設備',
                'Área de servicio completa': '充実したサービスエリア',
                'Descripción casa playa': '5寝室、広々としたテラス、プライベートプール、充実したサービスエリアを備えた高級ビーチハウス。快適な海辺の生活を楽しむための完璧な空間。',
                'Descripción casa playa modal': '4階建ての現代的なビーチハウス。プライバシーと快適さを重視する家族に最適。共用エリアとプライベートエリアを効率的に区分けしたインテリジェントなレイアウト。テラスからはゴルフ場の特別な眺めを楽しめます。',
                'Contactar ahora': '今すぐ問い合わせ',
                'Solicitar información': '資料請求',
                'Nombre completo': '氏名',
                'Correo electrónico': 'メールアドレス', 
                'Teléfono': '電話番号',
                'Enviar solicitud': '送信する'

            },
            'it': {
                'Inicio': 'Home',
                'Para Tí': 'Per Te',
                'Proyectos': 'Progetti',
                'Casas de Playa en Venta / Alquiler': 'Case in Spiaggia in Vendita / Affitto',
                'Proyecto Benavides 1': 'Progetto Benavides 1',
                'Proyecto Benavides 2': 'Progetto Benavides 2',
                'Proyecto Sienna': 'Progetto Sienna',
                'Proyecto Varsovia': 'Progetto Varsovia',
                'Contacto': 'Contatti',
                'Información': 'Informazioni',
                'Agenda Una Reunión': 'Prenota un Appuntamento',
                'Cotizar Proyecto': 'Richiedi Preventivo',
                'Login': 'Accedi', 
                'Perfil': 'Profilo',
                'Casa de Playa': 'Casa al Mare',
                'Dormitorios': 'Camere da letto',
                '5 dormitorios amplios': '5 ampie camere da letto',
                'Terrazas': 'Terrazze',
                'Amplias terrazas': 'Ampie terrazze',
                'Piscina': 'Piscina',
                'Piscina privada': 'Piscina privata',
                'Servicios': 'Servizi',
                'Área de servicio completa': 'Area servizi completa',
                'Descripción casa playa': 'Esclusiva casa al mare con 5 camere da letto, ampie terrazze per godersi gli spazi esterni, piscina privata e area servizi completa. Uno spazio perfetto per godersi la vita costiera con tutti i comfort.',
                'Descripción casa playa modal': 'Moderna casa al mare distribuita su quattro livelli, perfetta per famiglie che apprezzano privacy e comfort. Progettata con una disposizione intelligente che separa le aree sociali da quelle private, offrendo viste privilegiate sul campo da golf dalle sue terrazze.',
                'Contactar ahora': 'Contatta Ora',
                'Solicitar información': 'Richiedi Informazioni',
                'Nombre completo': 'Nome Completo', 
                'Correo electrónico': 'Email',
                'Teléfono': 'Telefono',
                'Enviar solicitud': 'Invia Richiesta'
            }
        };

        function translatePage(lang) {
            if (lang === 'es') {
                location.reload();
                return;
            }

            // Usar un fragmento de documento para optimizar las manipulaciones del DOM
            const fragment = document.createDocumentFragment();
            const elements = document.querySelectorAll('[data-translate]');
            
            // Procesar elementos en lotes para evitar bloqueo del navegador
            const batchSize = 10;
            let currentBatch = 0;

            function processBatch() {
                const start = currentBatch * batchSize;
                const end = Math.min(start + batchSize, elements.length);
                
                for (let i = start; i < end; i++) {
                    const element = elements[i];
                    const key = element.getAttribute('data-translate');
                    
                    if (translations[lang]?.[key]) {
                        if (element.tagName.toLowerCase() === 'input' || 
                            element.tagName.toLowerCase() === 'textarea') {
                            element.placeholder = translations[lang][key];
                        } else {
                            const isTextOnly = element.innerHTML.trim() === element.textContent.trim();
                            element[isTextOnly ? 'textContent' : 'innerHTML'] = translations[lang][key];
                        }
                    }
                }

                currentBatch++;
                
                if (currentBatch * batchSize < elements.length) {
                    requestAnimationFrame(processBatch);
                } else {
                    // Actualizar título después de procesar todas las traducciones
                    document.title = {
                        'en': 'POLYLINE - Construction Company',
                        'pt': 'POLYLINE - Construtora',
                        'zh': 'POLYLINE - 建筑公司',
                        'ja': 'POLYLINE - 建設会社',
                        'it': 'POLYLINE - Società di costruzioni'
                    }[lang] || 'POLYLINE - Constructora';

                    // Reinicializar animaciones solo si es necesario
                    if (typeof anime !== 'undefined' && typeof wrapLetters === 'function') {
                        requestAnimationFrame(() => {
                            const mainText = document.querySelector('.letters-main');
                            const subText = document.querySelector('.letters-sub');
                            
                            if (mainText) mainText.style.opacity = '1';
                            if (subText) subText.style.opacity = '1';
                            
                            wrapLetters('.letters-main');
                            wrapLetters('.letters-sub');
                            
                            // Usar requestAnimationFrame para las animaciones
                            requestAnimationFrame(() => {
                                anime.timeline({
                                    loop: false,
                                    easing: 'easeOutExpo'
                                })
                                .add({
                                    targets: '.hero-title .letter',
                                    translateY: ["1.1em", 0],
                                    translateX: ["0.55em", 0],
                                    rotateZ: [180, 0],
                                    duration: 600,
                                    delay: anime.stagger(40)
                                })
                                .add({
                                    targets: '.hero-subtitle .letter',
                                    opacity: [0, 1],
                                    duration: 800,
                                    delay: anime.stagger(20),
                                    offset: '-=400'
                                });
                            });
                        });
                    }
                }
            }

            // Iniciar el procesamiento por lotes
            requestAnimationFrame(processBatch);
        }

        // Cerrar el menú de idiomas cuando se hace clic fuera
        document.addEventListener('click', function(event) {
            const languageSelector = document.querySelector('.language-selector');
            const languageOptions = document.getElementById('languageOptions');
            
            if (!languageSelector.contains(event.target)) {
                languageOptions.classList.remove('show');
            }
        });
    </script>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script type="module" src="/js/property-viewer.js"></script>
